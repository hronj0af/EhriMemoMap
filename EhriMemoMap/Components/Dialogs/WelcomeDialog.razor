@inject IStringLocalizer<CommonResources> cl
@inject DialogService DialogService
@inject MapLogicService MapLogic;
@inject IJSRuntime JS
@inject MapStateService MapState
@if (statistics != null)
{

    @if (!MapState.IsMobileView)
    {
        <RadzenRow>

            <RadzenColumn Size="6" Style="background-color:var(--Wine-Red);color:var(--Beige)">
                <div style="padding:1.5rem">
                    <h1 style="padding-bottom:10px;font-size:48px;">MemoMap</h1>
                    <div style="font-size:15px;padding-bottom:10px">
                        @cl["welcomeText"]
                    </div>
                    <RadzenButton Click="OnClose" Style="text-transform: none;" ButtonStyle="ButtonStyle.Dark" Variant="Variant.Outlined">@cl["goToMap"]</RadzenButton>
                </div>
            </RadzenColumn>
            <RadzenColumn Size="6" Style="color:var(--Grey)">
                <div style="padding:1.5rem">
                    <h1 style="padding-bottom:10px;padding-top:15px;">@cl["prague"]</h1>
                    <table style="padding-bottom:15px">
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/home-welcome.svg' width=28 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countJews"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Victims
                            </td>
                        </tr>
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/incident-welcome.svg' width=28 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countIncidents"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Incidents
                            </td>
                        </tr>
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/interest-welcome.svg' width=28 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countPointsOfInterest"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Interests
                            </td>
                        </tr>
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/inaccessible-welcome.svg' width=28 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countInaccessiblePlaces"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Inaccessibles
                            </td>
                        </tr>
                    </table>
                    <div style="font-size:12px;color:var(--Wine-Red)">@cl["useNavigation"]</div>
                </div>
            </RadzenColumn>
        </RadzenRow>
    }
    else
    {
        <RadzenRow>

            <RadzenColumn Size="12" Style="color:var(--Grey))">
                <div style="padding:1.5rem">
                    <h1 style="padding-bottom:10px;font-size:48px;">MemoMap</h1>
                    <div style="font-size:12px;">
                        @cl["welcomeText"]
                    </div>
                </div>
                <div style="padding:1.5rem">
                    <table style="padding-bottom:15px">
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/home-welcome.svg' width=30 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countJews"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Victims
                            </td>
                        </tr>
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/incident-welcome.svg' width=30 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countIncidents"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Incidents
                            </td>
                        </tr>
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/interest-welcome.svg' width=30 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countPointsOfInterest"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Interests
                            </td>
                        </tr>
                        <tr>
                            <td class='cell firstCell'>
                                <img src='images/inaccessible-welcome.svg' width=30 />
                            </td>
                            <td class='cell secondCell'>
                                @cl["countInaccessiblePlaces"]
                            </td>
                            <td class='cell thirdCell'>
                                @statistics.Inaccessibles
                            </td>
                        </tr>
                    </table>
                    <RadzenButton class="rz-mt-4" ButtonStyle="ButtonStyle.Primary" Click="OnClose" Variant="Variant.Outlined">@cl["goToMap"]</RadzenButton>
                </div>
            </RadzenColumn>
        </RadzenRow>

    }
}


@code {

    WelcomeDialogStatistics? statistics;

    protected override async Task OnInitializedAsync()
    {

        statistics = await MapLogic.GetWelcomeDialogStatistics();
    }

    private async Task OnClose()
    {
        DialogService.CloseSide();
        DialogService.Close();
        MapState.SetDialogType(DialogTypeEnum.None);
        await JS.InvokeVoidAsync("mapAPI.fitMapToWindow");
        await JS.InvokeVoidAsync("mapAPI.unselectAllSelectedPoints");
    }

}