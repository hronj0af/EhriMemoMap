@using System.Linq


@inject IStringLocalizer<CommonResources> cl
@inject MapState MapState

@if (WMSResponse != null && WMSResponse.Layers != null && WMSResponse.Layers.Any(a => a.Type == WMSFeatureType.Obeti_holokaustu_z_Prahy && a.Features != null && a.Features.Count > 0))
{
    @foreach (var victimGroup in WMSResponse.Layers.Where(a => a.Type == WMSFeatureType.Obeti_holokaustu_z_Prahy).SelectMany(a => a.Features.GroupBy(b => b.Address)))
    {
        <h3>@victimGroup.Key</h3>
        <RadzenRow Gap="1rem" JustifyContent=JustifyContent.Left>
            @foreach (var victim in victimGroup)
            {
                <RadzenColumn Size="MapState.DialogIsFullscreen && !MapState.IsMobileBrowser ? 2 : 6">
                    <RadzenCard>
                        <RadzenImage Style="width:100%" Path="images/face.png" />
                        <div><small>@victim.NameAndBirthDate</small></div>
                    </RadzenCard>
                </RadzenColumn>
            }
        </RadzenRow>
    }
}

@code {
    [Parameter]
    public WMSResponse WMSResponse { get; set; }
}
