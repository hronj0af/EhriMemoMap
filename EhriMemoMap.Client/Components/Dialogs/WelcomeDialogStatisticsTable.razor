@inject IStringLocalizer<CommonResources> cl
@inject MapLogicService MapLogic;
@inject MapStateService MapState;

@if (statistics == null)
{
    <RadzenProgressBarCircular Value="100" ShowValue="false" Mode="ProgressBarMode.Indeterminate" />
}
else
{
    <table style="padding-bottom:15px">
        @if (statistics.Victims != null)
        {
            <tr>
                <td class='cell firstCell'>
                    <img src='images/home-welcome.svg' width=28 />
                </td>
                <td class='cell secondCell'>
                    @cl["countJews"]
                    <span class="tooltip">
                        <img src='/images/help-small.svg' class="icon-help" />
                        <span class="tooltiptext tooltiptext-top">@cl["help_victims_" + MapState?.Map?.InitialVariables?.City]</span>
                    </span>
                </td>
                <td class='cell thirdCell'>
                    @statistics.Victims
                </td>
            </tr>
        }

        @if (statistics.Incidents != null)
        {
            <tr>
                <td class='cell firstCell'>
                    <img src='images/incident-welcome.svg' width=28 />
                </td>
                <td class='cell secondCell'>
                    @cl["countIncidents"]
                    <span class="tooltip">
                        <img src='/images/help-small.svg' class="icon-help" />
                        <span class="tooltiptext tooltiptext-top">@cl["help_incident_" + MapState?.Map?.InitialVariables?.City]</span>
                    </span>
                </td>
                <td class='cell thirdCell'>
                    @statistics.Incidents
                </td>
            </tr>
        }

        @if (statistics.Interests != null)
        {
            <tr>
                <td class='cell firstCell'>
                    <img src='images/interest-welcome.svg' width=28 />
                </td>
                <td class='cell secondCell'>
                    @cl["countPointsOfInterest"]
                    <span class="tooltip">
                        <img src='/images/help-small.svg' class="icon-help" />
                        <span class="tooltiptext tooltiptext-top">@cl["help_interest_" + MapState?.Map?.InitialVariables?.City]</span>
                    </span>
                </td>
                <td class='cell thirdCell'>
                    @statistics.Interests
                </td>
            </tr>

        }

        @if (statistics.Inaccessibles != null)
        {
            <tr>
                <td class='cell firstCell'>
                    <img src='images/inaccessible-welcome.svg' width=28 />
                </td>
                <td class='cell secondCell'>
                    @cl["countInaccessiblePlaces"]
                    <span class="tooltip">
                        <img src='/images/help-small.svg' class="icon-help" />
                        <span class="tooltiptext tooltiptext-top">@cl["help_inaccessible_" + MapState?.Map?.InitialVariables?.City]</span>
                    </span>
                </td>
                <td class='cell thirdCell'>
                    @statistics.Inaccessibles
                </td>
            </tr>

        }

        @if (statistics.PlacesOfMemory != null)
        {
            <tr>
                <td class='cell firstCell'>
                    <img src='images/memory-welcome.svg' width=28 />
                </td>
                <td class='cell secondCell'>
                    @cl["countPlacesOfMemory"]
                    <span class="tooltip">
                        <img src='/images/help-small.svg' class="icon-help" />
                        <span class="tooltiptext tooltiptext-top">@cl["help_memory_" + MapState?.Map?.InitialVariables?.City]</span>
                    </span>
                </td>
                <td class='cell thirdCell'>
                    @statistics.PlacesOfMemory
                </td>
            </tr>
        }
    </table>
}

@code {

    WelcomeDialogStatistics? statistics;

    protected override async Task OnInitializedAsync()
    {
        statistics = await MapLogic.GetWelcomeDialogStatistics();
    }
}