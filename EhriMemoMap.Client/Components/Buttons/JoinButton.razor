@inject MapService MapService
@inject IStringLocalizer<CommonResources> cl
@inject NavigationManager NavManager

@if (!MobileVersion)
{
    <div class="icon" title="@(cl["joinToProject"] + "...")" onclick="@(() => RedirectToForm())">
        <svg width="47" height="49" viewBox="0 0 47 49" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="BackgroundLayer">
                <path id="Rectangle 23" d="M0 3.99999C0 1.79086 1.79086 0 4 0H47.1795V48.7521H4C1.79086 48.7521 0 46.9613 0 44.7521V3.99999Z" fill="#46463D" class="background" />
            </g>

            <svg x="6" y="6" width="35" height="35" viewBox="0 -960 960 960">
                <path d="M480-80Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880h20q10 0 20 2v81q-10-2-19.5-2.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186q122-112 181-203.5T720-552v-8h80v8q0 100-79.5 217.5T480-80Zm0-400q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0-80Zm240-80h80v-120h120v-80H800v-120h-80v120H600v80h120v120Z" fill="white" class="foreground" />
            </svg>
        </svg>
    </div>
}
else
{

    <div class="icon rz-mr-2" style="height:22px;" title="@(cl["joinToProject"] + "...")" onclick="@(() => RedirectToForm())">
        <svg width="22" height="22" viewBox="0 -960 960 960" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="Group 135">
                <path d="M480-80Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880h20q10 0 20 2v81q-10-2-19.5-2.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186q122-112 181-203.5T720-552v-8h80v8q0 100-79.5 217.5T480-80Zm0-400q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0-80Zm240-80h80v-120h120v-80H800v-120h-80v120H600v80h120v120Z" fill="#D5D2B8" />
            </g>
        </svg>
    </div>

}
@code {
    [Parameter]
    public bool MobileVersion { get; set; } = false;

    protected override void OnInitialized()
    {
        MapService.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        MapService.OnChange -= StateHasChanged;
    }

    private async Task RedirectToForm()
    {
        NavManager.NavigateTo("https://docs.google.com/forms/d/15jprT8Sbc-Llt1CfAPrIzU4S8YIDjREixRADGzbA62k/viewform?edit_requested=true", true);
    }
}